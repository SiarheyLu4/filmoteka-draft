function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var n,i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return u.Date.now()};function g(e,t,n){var i,o,r,a,s,c,l=0,u=!1,d=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=i,r=o;return i=o=void 0,l=t,a=e.apply(r,n)}function b(e){return l=e,s=setTimeout(x,t),u?m(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=r}function x(){var e=h();if(w(e))return _(e);s=setTimeout(x,function(e){var n=t-(e-c);return d?p(n,r-(e-l)):n}(e))}function _(e){return s=void 0,g&&i?m(e):(i=o=void 0,a)}function j(){var e=h(),n=w(e);if(i=arguments,o=this,c=e,n){if(void 0===s)return b(c);if(d)return s=setTimeout(x,t),m(c)}return void 0===s&&(s=setTimeout(x,t)),a}return t=v(t)||0,y(n)&&(u=!!n.leading,r=(d="maxWait"in n)?f(v(n.maxWait)||0,t):r,g="trailing"in n?!!n.trailing:g),j.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=c=o=s=void 0},j.flush=function(){return void 0===s?a:_(h())},j}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=r.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):o.test(e)?NaN:+e}n=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return y(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),g(e,t,{leading:i,maxWait:t,trailing:o})};const m=document.querySelector(".back_to_top");window.addEventListener("scroll",e(n)((function(){const e=window.pageYOffset;e>500&&m.classList.add("back_to_top-show"),e<500&&m.classList.remove("back_to_top-show")}),500)),m.addEventListener("click",(function e(){window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(e,0))}));var b,w,x,_,j={};b=j,w="Spinner",x=function(){return S},_=function(e){return S=e},Object.defineProperty(b,w,{get:x,set:_,enumerable:!0,configurable:!0});var $=function(){return $=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$.apply(this,arguments)},O={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},S=function(){function e(e){void 0===e&&(e={}),this.opts=$($({},O),e)}return e.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),T(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,t){var n=Math.round(t.corners*t.width*500)/1e3+"px",i="none";!0===t.shadow?i="0 2px 4px #000":"string"==typeof t.shadow&&(i=t.shadow);for(var o=function(e){for(var t=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],i=0,o=e.split(",");i<o.length;i++){var r=o[i].match(t);if(null!==r){var a=+r[2],s=+r[5],c=r[4],l=r[7];0!==a||c||(c=l),0!==s||l||(l=c),c===l&&n.push({prefix:r[1]||"",x:a,y:s,xUnits:c,yUnits:l,end:r[8]})}}return n}(i),r=0;r<t.lines;r++){var a=~~(360/t.lines*r+t.rotate),s=T(document.createElement("div"),{position:"absolute",top:-t.width/2+"px",width:t.length+t.width+"px",height:t.width+"px",background:k(t.fadeColor,r),borderRadius:n,transformOrigin:"left",transform:"rotate("+a+"deg) translateX("+t.radius+"px)"}),c=r*t.direction/t.lines/t.speed;c-=1/t.speed;var l=T(document.createElement("div"),{width:"100%",height:"100%",background:k(t.color,r),borderRadius:n,boxShadow:M(o,a),animation:1/t.speed+"s linear "+c+"s infinite "+t.animation});s.appendChild(l),e.appendChild(s)}}(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function T(e,t){for(var n in t)e.style[n]=t[n];return e}function k(e,t){return"string"==typeof e?e:e[t%e.length]}function M(e,t){for(var n=[],i=0,o=e;i<o.length;i++){var r=o[i],a=E(r.x,r.y,t);n.push(r.prefix+a[0]+r.xUnits+" "+a[1]+r.yUnits+r.end)}return n.join(", ")}function E(e,t,n){var i=n*Math.PI/180,o=Math.sin(i),r=Math.cos(i);return[Math.round(1e3*(e*r+t*o))/1e3,Math.round(1e3*(-e*o+t*r))/1e3]}var N={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#FF6B08",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"fixed"};class q{async fetchPopular(){const e=document.querySelector(".container-card"),t=new(0,j.Spinner)(N).spin(e);try{const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8&page=${this.page}`,n=await fetch(e),i=await n.json();return console.log(i),t.stop(),i.results}catch(e){console.log(e)}}async fetchByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&page=${this.page}&include_adult=false`,n=await fetch(t);return(await n.json()).results}catch(e){console.log(e)}}async getGenres(){try{const e="https://api.themoviedb.org/3/genre/movie/list?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US",t=await fetch(e),n=await t.json();return console.log(n.genres),n.genres}catch(e){console.log(e)}}async getCountByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&include_adult=false`,n=await fetch(t);return(await n.json()).total_results}catch(e){console.log(e)}}async fetchById(e){try{const t=`https://api.themoviedb.org/3/movie/${e}?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US`,n=await fetch(t);return await n.json()}catch(e){console.log(e)}}setCurrentPage(e){this.page=e}incrementPage(){this.page+=1}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1}}const C=new q,I=document.querySelector(".container-card");async function P(e){const t=await C.fetchByQuery(e);I.innerHTML=await U(t)}function U(e){return e.map((({poster_path:e,id:t,original_title:n,release_date:i,genre_ids:o})=>`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    <div class="poster">\n                        <img src="https://image.tmdb.org/t/p/w500${e}" alt="${n}">\n                    </div>\n                    <div class="info">\n                      <h3 class="info_title">${n}</h3>\n                      <p class="info_details">\n                          ${o} | ${i}\n                      </p>\n                    </div>\n                  </div> \n        `)).join("")}const z=new q,A=document.querySelector(".header-input-container"),B=document.querySelector("#search-box");z.fetchPopular(),A.addEventListener("submit",(function(e){try{e.preventDefault(),searchQuery=B.value,""===searchQuery&&console.log("надо ввести фильм"),P(searchQuery)}catch{}})),async function(){const e=await C.fetchPopular();I.insertAdjacentHTML("beforeend",U(e))}();
//# sourceMappingURL=index.424e6dd1.js.map
